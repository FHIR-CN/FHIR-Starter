<div class="container-fluid" ng-controller="ServerController">
    <div class="alert alert-dismissable alert-danger" ng-show="error">
        <button type="button" class="close" data-dismiss="alert">Ã—</button>
        <strong>Error</strong> contacting {{::activeServer.name}}. A few reasons this may be so:
        <ul>
            <li>The base URL is incorrect: double-check and try again.</li>
            <li>The service endpoint might not be available: you could try again later.</li>
            <li>This may not be a conformant FHIR server: can't help you there.</li>
        </ul>
    </div>

    <div ng-show="activeServer">
        <div class="alert alert-success" ng-hide="error">
            You are currently targeting the <strong>{{::activeServer.name}}</strong> FHIR server. Use the form below to
            change to a server not listed in the dropdown menu.
        </div>
        <div>
            <tabset>
                <tab heading="FHIR Server">
                    <div style="padding-top: 20px">
                        <ng-form name="serverForm" class="form-horizontal" ng-model="activeServer">
                            <div class="form-group">
                                <label for="name" class="col-lg-2 control-label">Name</label>

                                <div class="col-lg-5">
                                    <input type="text" class="form-control" id="name" ng-model="activeServer.name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="name" class="col-lg-2 control-label">Base Url</label>

                                <div class="col-lg-5">
                                    <input type="text" class="form-control" id="baseUrl"
                                           ng-model="activeServer.baseUrl">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12 col-lg-offset-2">
                                    <button type="button" class="btn btn-primary" ng-click="addNewServer()">Get Conformance</button>
                                </div>
                            </div>
                        </ng-form>
                    </div>
                </tab>
                <tab heading="Conformance Summary">
                    <div style="padding-top: 20px">
                        <div class="alert alert-info" ng-hide="conformance">
                            Conformance detail is unavailable.
                        </div>
                        <div ng-show="conformance">
                            <table class="table table-striped table-hover">
                                <tr>
                                    <td>Name</td>
                                    <td>{{conformance.name}}</td>
                                </tr>
                                <tr>
                                    <td>Description</td>
                                    <td>{{conformance.description}}</td>
                                </tr>
                                <tr>
                                    <td>FHIR Version</td>
                                    <td>{{conformance.fhirVersion}}</td>
                                </tr>
                                <tr>
                                    <td>Publisher</td>
                                    <td>{{conformance.publisher}}</td>
                                </tr>
                                <tr>
                                    <td>Implementation</td>
                                    <td>{{conformance.implementation.description}}</td>
                                </tr>
                                <tr>
                                    <td>Url</td>
                                    <td>{{conformance.implementation.url}}</td>
                                </tr>
                                <tr>
                                    <td>Format</td>
                                    <td>
                                        <div ng-repeat="item in conformance.format">
                                            <p class="small">{{item}}</p>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </tab>
                <tab heading="Security">
                    <div style="padding-top: 20px">
                        <div class="alert alert-info" ng-hide="conformance.rest[0].security">
                            Security information is unavailable.
                        </div>
                        <div ng-show="conformance.rest[0].security">
                            <table class="table table-striped table-hover">
                                <tr>
                                    <td>Description</td>
                                    <td>{{conformance.rest[0].security.description}}</td>
                                </tr>
                                <tr>
                                    <td>Cross-Origin Resource Sharing (CORS)</td>
                                    <td>{{conformance.rest[0].security.cors}}</td>
                                </tr>
                                <div ng-show="conformance.rest[0].security.service">
                                    <tr>
                                        <td>Services</td>
                                        <td>
                                            <div ng-repeat="item in conformance.rest[0].security.service"
                                                class="list-group">
                                                <h5 class="list-group-item-heading">{{item.text}}</h5>
                                             </div>
                                        </td>
                                    </tr>
                                </div>
                                <div ng-show="conformance.rest[0].security.extension">
                                    <tr>
                                        <td>Extensions</td>
                                        <td>
                                            <ul ng-repeat="item in conformance.rest[0].security.extension"
                                                class="list-group">
                                                <li ng-repeat="(key, val) in item" class="list-group-item">
                                                    <strong>{{key}}</strong>: {{val}}
                                                </li>
                                            </ul>
                                        </td>
                                    </tr>
                                </div>
                            </table>
                        </div>
                    </div>
                </tab>
                <tab heading="Supported Resources">
                    <div style="padding-top: 20px">
                        <div class="alert alert-info" ng-hide="conformance">
                            Supported resources are unavailable.
                        </div>
                        <div class="row" ng-show="conformance">
                            <div ng-repeat="item in conformance.rest">
                                <div ng-repeat="resource in item.resource">
                                    <a class="col-lg-3" href="#">{{ resource.type }}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="Narrative">
                    <div style="padding: 20px">
                        <div class="alert alert-info" ng-hide="conformance.text">
                            Narrative is unavailable.
                        </div>
                        <div class="row" ng-show="conformance.text">
                            <div class="col-lg-10" ng-bind-html="conformance.text.div">
                            </div>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
    </div>
</div>