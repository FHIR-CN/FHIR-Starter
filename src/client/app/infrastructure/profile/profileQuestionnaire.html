<section class="mainbar" data-ng-controller="profileQuestionnaire as vm">
    <section class="matter">
        <div class="container-fluid">
            <div>
                <button class="btn btn-info" data-ng-click="vm.goBack()"><i class="fa fa-hand-o-left"></i>Back</button>
                <button class="btn btn-info" data-ng-click="vm.cancel()" data-ng-disabled="!vm.canSave"><i
                        class="fa fa-undo"></i>Cancel
                </button>
                <button class="btn btn-info" data-ng-click="vm.save()" data-ng-disabled="!vm.canSave"><i
                        class="fa fa-save"></i>Save
                </button>
                <div class="pull-right">
                    <button class="btn btn-info" data-ng-click="vm.delete()" data-ng-disabled="!vm.canDelete"><i
                            class="fa fa-minus"></i>Delete
                    </button>
                </div>
            </div>
            <div class="widget worange">
                <div data-cc-widget-header title="{{vm.questionnaire.title}}"></div>
                <accordion close-others="true">
                    <accordion-group heading="Summary" is-open="vm.status.isFirstOpen"
                                     is-disabled="vm.status.isFirstDisabled">
                        <div>
                            <div class="col-md-8" data-ng-bind-html="vm.questionnaire.summary">
                            </div>
                        </div>
                    </accordion-group>
                    <accordion-group heading="Details">
                        <table class="table table-striped table-hover">
                            <tr>
                                <td>Authored</td>
                                <td>{{vm.questionnaire.content.authored}}</td>
                            </tr>
                            <tr>
                                <td>Status</td>
                                <td>{{vm.questionnaire.content.status}}</td>
                            </tr>
                            <tr>
                                <td>Subject</td>
                                <td><a href="{{vm.questionnaire.content.subject.reference}}">{{vm.questionnaire.content.subject.display}}</a>
                                </td>
                            </tr>
                            <tr>
                                <td>Author</td>
                                <td><a href="{{vm.questionnaire.content.author.reference}}">{{vm.questionnaire.content.author.display}}</a>
                                </td>
                            </tr>
                            <tr>
                                <td>Source</td>
                                <td><a href="{{vm.questionnaire.content.source.reference}}">{{vm.questionnaire.content.source.display}}</a>
                                </td>
                            </tr>
                            <tr>
                                <td>Name</td>
                                <td>{{vm.questionnaire.content.name.text}}
                                    <div data-ng-repeat="coding in vm.questionnaire.content.name.coding">
                                        <p class="small">{{coding.system}} : {{coding.code}}</p>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Identifier</td>
                                <td>
                                    <div data-ng-repeat="id in vm.questionnaire.content.identifier">
                                        <p class="small">{{id.system}} : {{id.value}}</p>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Encounter</td>
                                <td><a href="{{vm.questionnaire.content.encounter.reference}}">{{vm.questionnaire.content.encounter.display}}</a>
                                </td>
                            </tr>
                        </table>
                    </accordion-group>
                    <div data-ng-show="vm.questionnaire.content.group">
                        <accordion-group heading="{{vm.questionnaire.content.group.header}}">
                            <table class="table table-striped table-hover">
                                <thead>
                                <th>Name</th>
                                <th>Text</th>
                                <th>Extension</th>
                                <th>Options</th>
                                </thead>
                                <tbody>
                                <tr data-ng-repeat="question in vm.questionnaire.content.group.question">
                                    <td>
                                        <ul class="list-group" data-ng-repeat="coding in question.name.coding">
                                            <li class="list-group-item">{{coding.code}}</li>
                                            <li class="list-group-item">{{coding.system}}</li>
                                        </ul>
                                    </td>
                                    <td>{{question.text}}</td>
                                    <td>
                                        <ul class="list-group" data-ng-repeat="ext in question.extension">
                                            <li class="list-group-item">{{ext.url}}</li>
                                            <li class="list-group-item">{{(ext.valueBoolean || ext.valueCode)}}</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <p class="small">{{question.options.reference}}</p>

                                        <p class="small">{{question.options.display}}</p>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </accordion-group>
                    </div>

                </accordion>
            </div>
        </div>
    </section>
</section>